export function haversineDistanceKm(a, b) {
  const R = 6371.0;
  const toRad = (d) => (d * Math.PI) / 180;
  const dLat = toRad(b.lat - a.lat);
  const dLon = toRad(b.lon - a.lon);
  const s =
    Math.sin(dLat / 2) ** 2 +
    Math.cos(toRad(a.lat)) * Math.cos(toRad(b.lat)) * Math.sin(dLon / 2) ** 2;
  return 2 * R * Math.asin(Math.sqrt(s));
}

export function getAirportByIata(code) {
  if (!code) return undefined;
  const c = code.toUpperCase();
  return AIRPORTS.find((a) => a.iata === c);
}

export const AIRPORTS = [
  // Norden
  {
    iata: 'ARN',
    icao: 'ESSA',
    name: 'Stockholm Arlanda',
    city: 'Stockholm',
    country: 'SE',
    lat: 59.6519,
    lon: 17.9186,
    elevationM: 41,
    timezone: 'Europe/Stockholm',
    runways: 3,
    terminals: 4,
    flightsPerYear: 230_000,
    passengersPerYear: 27_000_000,
    cargoTonsPerYear: 220_000
  },
  {
    iata: 'BMA',
    icao: 'ESSB',
    name: 'Stockholm Bromma',
    city: 'Stockholm',
    country: 'SE',
    lat: 59.3544,
    lon: 17.9397,
    elevationM: 14,
    timezone: 'Europe/Stockholm',
    runways: 1,
    terminals: 1,
    flightsPerYear: 60_000,
    passengersPerYear: 2_200_000,
    cargoTonsPerYear: 5_000
  },
  {
    iata: 'CPH',
    icao: 'EKCH',
    name: 'Copenhagen Kastrup',
    city: 'Copenhagen',
    country: 'DK',
    lat: 55.618,
    lon: 12.6508,
    elevationM: 5,
    timezone: 'Europe/Copenhagen',
    runways: 3,
    terminals: 2,
    flightsPerYear: 300_000,
    passengersPerYear: 31_000_000,
    cargoTonsPerYear: 450_000
  },
  {
    iata: 'OSL',
    icao: 'ENGM',
    name: 'Oslo Gardermoen',
    city: 'Oslo',
    country: 'NO',
    lat: 60.1939,
    lon: 11.1004,
    elevationM: 208,
    timezone: 'Europe/Oslo',
    runways: 2,
    terminals: 1,
    flightsPerYear: 300_000,
    passengersPerYear: 28_000_000,
    cargoTonsPerYear: 200_000
  },
  {
    iata: 'HEL',
    icao: 'EFHK',
    name: 'Helsinki Vantaa',
    city: 'Helsinki',
    country: 'FI',
    lat: 60.3172,
    lon: 24.9633,
    elevationM: 55,
    timezone: 'Europe/Helsinki',
    runways: 3,
    terminals: 1,
    flightsPerYear: 230_000,
    passengersPerYear: 20_000_000,
    cargoTonsPerYear: 200_000
  },
  {
    iata: 'GOT',
    icao: 'ESGG',
    name: 'Gothenburg Landvetter',
    city: 'Gothenburg',
    country: 'SE',
    lat: 57.6628,
    lon: 12.2798,
    elevationM: 154,
    timezone: 'Europe/Stockholm',
    runways: 1,
    terminals: 1,
    flightsPerYear: 90_000,
    passengersPerYear: 7_000_000,
    cargoTonsPerYear: 150_000
  },
  {
    iata: 'MMX',
    icao: 'ESMS',
    name: 'Malmö',
    city: 'Malmö',
    country: 'SE',
    lat: 55.5363,
    lon: 13.3762,
    elevationM: 72,
    timezone: 'Europe/Stockholm',
    runways: 1,
    terminals: 1,
    flightsPerYear: 30_000,
    passengersPerYear: 2_000_000,
    cargoTonsPerYear: 40_000
  },

  // Europa
  {
    iata: 'LHR',
    icao: 'EGLL',
    name: 'London Heathrow',
    city: 'London',
    country: 'GB',
    lat: 51.47,
    lon: -0.4543,
    elevationM: 25,
    timezone: 'Europe/London',
    runways: 2,
    terminals: 4,
    flightsPerYear: 470_000,
    passengersPerYear: 80_000_000,
    cargoTonsPerYear: 1_400_000
  },
  {
    iata: 'LGW',
    icao: 'EGKK',
    name: 'London Gatwick',
    city: 'London',
    country: 'GB',
    lat: 51.1537,
    lon: -0.1821,
    elevationM: 62,
    timezone: 'Europe/London',
    runways: 1,
    terminals: 2,
    flightsPerYear: 260_000,
    passengersPerYear: 42_000_000,
    cargoTonsPerYear: 150_000
  },
  {
    iata: 'AMS',
    icao: 'EHAM',
    name: 'Amsterdam Schiphol',
    city: 'Amsterdam',
    country: 'NL',
    lat: 52.3105,
    lon: 4.7683,
    elevationM: -3,
    timezone: 'Europe/Amsterdam',
    runways: 6,
    terminals: 1,
    flightsPerYear: 500_000,
    passengersPerYear: 70_000_000,
    cargoTonsPerYear: 1_600_000
  },
  {
    iata: 'CDG',
    icao: 'LFPG',
    name: 'Paris Charles de Gaulle',
    city: 'Paris',
    country: 'FR',
    lat: 49.0097,
    lon: 2.5479,
    elevationM: 119,
    timezone: 'Europe/Paris',
    runways: 4,
    terminals: 3,
    flightsPerYear: 480_000,
    passengersPerYear: 72_000_000,
    cargoTonsPerYear: 2_100_000
  },
  {
    iata: 'ORY',
    icao: 'LFPO',
    name: 'Paris Orly',
    city: 'Paris',
    country: 'FR',
    lat: 48.727,
    lon: 2.3794,
    elevationM: 89,
    timezone: 'Europe/Paris',
    runways: 3,
    terminals: 2,
    flightsPerYear: 230_000,
    passengersPerYear: 31_000_000,
    cargoTonsPerYear: 150_000
  },
  {
    iata: 'FRA',
    icao: 'EDDF',
    name: 'Frankfurt Main',
    city: 'Frankfurt',
    country: 'DE',
    lat: 50.0379,
    lon: 8.5622,
    elevationM: 111,
    timezone: 'Europe/Berlin',
    runways: 4,
    terminals: 2,
    flightsPerYear: 500_000,
    passengersPerYear: 70_000_000,
    cargoTonsPerYear: 2_200_000
  },
  {
    iata: 'MUC',
    icao: 'EDDM',
    name: 'Munich',
    city: 'Munich',
    country: 'DE',
    lat: 48.3538,
    lon: 11.7861,
    elevationM: 453,
    timezone: 'Europe/Berlin',
    runways: 2,
    terminals: 2,
    flightsPerYear: 400_000,
    passengersPerYear: 50_000_000,
    cargoTonsPerYear: 450_000
  },
  {
    iata: 'ZRH',
    icao: 'LSZH',
    name: 'Zurich',
    city: 'Zurich',
    country: 'CH',
    lat: 47.4582,
    lon: 8.5555,
    elevationM: 432,
    timezone: 'Europe/Zurich',
    runways: 3,
    terminals: 2,
    flightsPerYear: 270_000,
    passengersPerYear: 30_000_000,
    cargoTonsPerYear: 500_000
  },
  {
    iata: 'BRU',
    icao: 'EBBR',
    name: 'Brussels',
    city: 'Brussels',
    country: 'BE',
    lat: 50.901,
    lon: 4.4844,
    elevationM: 58,
    timezone: 'Europe/Brussels',
    runways: 3,
    terminals: 1,
    flightsPerYear: 220_000,
    passengersPerYear: 26_000_000,
    cargoTonsPerYear: 700_000
  },
  {
    iata: 'VIE',
    icao: 'LOWW',
    name: 'Vienna',
    city: 'Vienna',
    country: 'AT',
    lat: 48.1103,
    lon: 16.5697,
    elevationM: 183,
    timezone: 'Europe/Vienna',
    runways: 2,
    terminals: 2,
    flightsPerYear: 240_000,
    passengersPerYear: 32_000_000,
    cargoTonsPerYear: 300_000
  },
  {
    iata: 'IST',
    icao: 'LTFM',
    name: 'Istanbul (IST)',
    city: 'Istanbul',
    country: 'TR',
    lat: 41.2753,
    lon: 28.7519,
    elevationM: 99,
    timezone: 'Europe/Istanbul',
    runways: 5,
    terminals: 1,
    flightsPerYear: 510_000,
    passengersPerYear: 95_000_000,
    cargoTonsPerYear: 2_000_000
  },
  {
    iata: 'KEF',
    icao: 'BIKF',
    name: 'Keflavík',
    city: 'Reykjavík',
    country: 'IS',
    lat: 63.985,
    lon: -22.6056,
    elevationM: 52,
    timezone: 'Atlantic/Reykjavik',
    runways: 2,
    terminals: 1,
    flightsPerYear: 110_000,
    passengersPerYear: 7_500_000,
    cargoTonsPerYear: 50_000
  },
  {
    iata: 'DUB',
    icao: 'EIDW',
    name: 'Dublin',
    city: 'Dublin',
    country: 'IE',
    lat: 53.4273,
    lon: -6.2436,
    elevationM: 74,
    timezone: 'Europe/Dublin',
    runways: 2,
    terminals: 2,
    flightsPerYear: 260_000,
    passengersPerYear: 36_000_000,
    cargoTonsPerYear: 180_000
  },
  {
    iata: 'BCN',
    icao: 'LEBL',
    name: 'Barcelona El Prat',
    city: 'Barcelona',
    country: 'ES',
    lat: 41.2974,
    lon: 2.0833,
    elevationM: 4,
    timezone: 'Europe/Madrid',
    runways: 3,
    terminals: 2,
    flightsPerYear: 330_000,
    passengersPerYear: 50_000_000,
    cargoTonsPerYear: 180_000
  },
  {
    iata: 'MAD',
    icao: 'LEMD',
    name: 'Madrid Barajas',
    city: 'Madrid',
    country: 'ES',
    lat: 40.4722,
    lon: -3.5608,
    elevationM: 610,
    timezone: 'Europe/Madrid',
    runways: 4,
    terminals: 4,
    flightsPerYear: 400_000,
    passengersPerYear: 60_000_000,
    cargoTonsPerYear: 600_000
  },
  {
    iata: 'LIS',
    icao: 'LPPT',
    name: 'Lisbon',
    city: 'Lisbon',
    country: 'PT',
    lat: 38.7742,
    lon: -9.1342,
    elevationM: 114,
    timezone: 'Europe/Lisbon',
    runways: 2,
    terminals: 2,
    flightsPerYear: 200_000,
    passengersPerYear: 30_000_000,
    cargoTonsPerYear: 180_000
  },
  {
    iata: 'NCE',
    icao: 'LFMN',
    name: "Nice Côte d'Azur",
    city: 'Nice',
    country: 'FR',
    lat: 43.6653,
    lon: 7.215,
    elevationM: 4,
    timezone: 'Europe/Paris',
    runways: 2,
    terminals: 2,
    flightsPerYear: 160_000,
    passengersPerYear: 14_000_000,
    cargoTonsPerYear: 20_000
  },
  {
    iata: 'FCO',
    icao: 'LIRF',
    name: 'Rome Fiumicino',
    city: 'Rome',
    country: 'IT',
    lat: 41.8003,
    lon: 12.2389,
    elevationM: 3,
    timezone: 'Europe/Rome',
    runways: 4,
    terminals: 4,
    flightsPerYear: 320_000,
    passengersPerYear: 45_000_000,
    cargoTonsPerYear: 200_000
  },

  // Nordamerika
  {
    iata: 'JFK',
    icao: 'KJFK',
    name: 'New York JFK',
    city: 'New York',
    country: 'US',
    lat: 40.6413,
    lon: -73.7781,
    elevationM: 4,
    timezone: 'America/New_York',
    runways: 4,
    terminals: 5,
    flightsPerYear: 450_000,
    passengersPerYear: 62_000_000,
    cargoTonsPerYear: 2_000_000
  },
  {
    iata: 'EWR',
    icao: 'KEWR',
    name: 'Newark',
    city: 'Newark',
    country: 'US',
    lat: 40.6895,
    lon: -74.1745,
    elevationM: 5,
    timezone: 'America/New_York',
    runways: 3,
    terminals: 3,
    flightsPerYear: 450_000,
    passengersPerYear: 50_000_000,
    cargoTonsPerYear: 1_200_000
  },
  {
    iata: 'BOS',
    icao: 'KBOS',
    name: 'Boston Logan',
    city: 'Boston',
    country: 'US',
    lat: 42.3656,
    lon: -71.0096,
    elevationM: 6,
    timezone: 'America/New_York',
    runways: 6,
    terminals: 4,
    flightsPerYear: 380_000,
    passengersPerYear: 40_000_000,
    cargoTonsPerYear: 450_000
  },
  {
    iata: 'IAD',
    icao: 'KIAD',
    name: 'Washington Dulles',
    city: 'Washington',
    country: 'US',
    lat: 38.9531,
    lon: -77.4565,
    elevationM: 95,
    timezone: 'America/New_York',
    runways: 2,
    terminals: 1,
    flightsPerYear: 300_000,
    passengersPerYear: 25_000_000,
    cargoTonsPerYear: 1_100_000
  },
  {
    iata: 'ORD',
    icao: 'KORD',
    name: "Chicago O'Hare",
    city: 'Chicago',
    country: 'US',
    lat: 41.9742,
    lon: -87.9073,
    elevationM: 204,
    timezone: 'America/Chicago',
    runways: 8,
    terminals: 4,
    flightsPerYear: 900_000,
    passengersPerYear: 75_000_000,
    cargoTonsPerYear: 2_200_000
  },
  {
    iata: 'YYZ',
    icao: 'CYYZ',
    name: 'Toronto Pearson',
    city: 'Toronto',
    country: 'CA',
    lat: 43.6777,
    lon: -79.6248,
    elevationM: 173,
    timezone: 'America/Toronto',
    runways: 5,
    terminals: 2,
    flightsPerYear: 470_000,
    passengersPerYear: 50_000_000,
    cargoTonsPerYear: 600_000
  },
  {
    iata: 'YUL',
    icao: 'CYUL',
    name: 'Montréal Trudeau',
    city: 'Montréal',
    country: 'CA',
    lat: 45.4706,
    lon: -73.7408,
    elevationM: 36,
    timezone: 'America/Toronto',
    runways: 3,
    terminals: 1,
    flightsPerYear: 230_000,
    passengersPerYear: 22_000_000,
    cargoTonsPerYear: 200_000
  },
  {
    iata: 'LAX',
    icao: 'KLAX',
    name: 'Los Angeles',
    city: 'Los Angeles',
    country: 'US',
    lat: 33.9416,
    lon: -118.4085,
    elevationM: 38,
    timezone: 'America/Los_Angeles',
    runways: 4,
    terminals: 9,
    flightsPerYear: 700_000,
    passengersPerYear: 75_000_000,
    cargoTonsPerYear: 2_700_000
  },
  {
    iata: 'SFO',
    icao: 'KSFO',
    name: 'San Francisco',
    city: 'San Francisco',
    country: 'US',
    lat: 37.6213,
    lon: -122.379,
    elevationM: 4,
    timezone: 'America/Los_Angeles',
    runways: 4,
    terminals: 4,
    flightsPerYear: 450_000,
    passengersPerYear: 57_000_000,
    cargoTonsPerYear: 1_300_000
  },
  {
    iata: 'DCA',
    icao: 'KDCA',
    name: 'Washington Reagan National',
    city: 'Washington',
    country: 'US',
    lat: 38.8521,
    lon: -77.0377,
    elevationM: 5,
    timezone: 'America/New_York',
    runways: 3,
    terminals: 2,
    flightsPerYear: 300_000,
    passengersPerYear: 24_000_000,
    cargoTonsPerYear: 50_000
  }
];
